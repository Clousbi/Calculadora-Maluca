<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link
        href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@300;400;500;600&family=Raleway:ital,wght@0,300;1,400;1,500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>Calculadora</title>
</head>
<body>
    <div class="content">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-md-8 col-sm-7 col-xs-12">
                    <input type="text" onkeypress="return event.charCode >= 48 && event.charCode <= 57" id="resultado">
                    <label for="pontos" id="pontosJogo" style="display: none;">Pontos:</label>
                    <input type="text" id="pontos" style="display: none">
                    <input type="text" id="comparador" style="display: none">
                    <input type="text" id="operacaoJogo" style="display: none">
                </div>
                <div class="col-lg-8 col-md-8 col-sm-7 col-xs-12">
                    <button class="op" onclick="clean('C')">C</button>
                    <button class="op" onclick="backspace('<')"><</button>
                    <button class="op" onclick="insert('/')">/</button>
                    <button class="op" onclick="insert('*')">x</button>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-7 col-xs-12">
                    <button class="n" id="numero" onclick="insert('7')">7</button>
                    <button class="n" id="numero" onclick="insert('8')">8</button>
                    <button class="n" id="numero" onclick="insert('9')">9</button>
                    <button class="op" onclick="insert('-')">-</button>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-7 col-xs-12"> <!-- mudar os id -->
                    <button class="n" id="numero" onclick="insert('4')">4</button>
                    <button class="n" id="numero" onclick="insert('5')">5</button>
                    <button class="n" id="numero" onclick="insert('6')">6</button>
                    <button class="op" onclick="insert('+')">+</button>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-7 col-xs-12">
                    <button class="n" id="numero" onclick="insert('1')">1</button>
                    <button class="n" id="numero" onclick="insert('2')">2</button>
                    <button class="n" id="numero" onclick="insert('3')">3</button>
                    <button class="op" id="igualtecla" onclick="result('=')">=</button>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-7 col-xs-12">
                    <button class="n" style="width: 26mm;" onclick="insert('0')">0</button>
                    <button class="op" onclick="insert('.')">.</button>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-7 col-xs-12">
                    <button class="calM" onclick="teste()">Calculadora Maluca</button>
                    <button class="voltar" id="voltar" onclick="voltar()" style="display: none">Voltar</button>
                    <span id="timer"></span>
                </div>
            </div>
        </div>
    </div>
    <script>
        //calculadora normal
        function insert(num) { //aparece o número na tabela
            var numero = document.getElementById('resultado').value;
            document.getElementById('resultado').value = numero + num;
        }
        //
        function clean() { // limpa a operação inteira
            document.getElementById('resultado').value = " ";
            document.getElementById('operacaoJogo').value = " ";
        }
        //
        function backspace() { // limpa somente um número
            var resultado = document.getElementById('resultado').value;
            document.getElementById('resultado').value = resultado.substring(0, resultado.length - 1);
        }
        //
        function result() {//função da operação 
            var resultado = document.getElementById('resultado').value;
            if (resultado) {
                document.getElementById('resultado').value = eval(resultado);
            } else {
                document.getElementById('resultado').value = "Não definido";
            }
        }
        //
        //
        //
        //calculadora maluca
        var resultado;
        var valor = 0;
        var interval;
        function teste(){
            clean();
            calculateM();
            configTimer();
            document.getElementById('pontos').value = '0';
            //
            var bloco = document.getElementById('operacaoJogo');
            bloco.style.display = "block";
            var volta = document.getElementById('voltar');
            volta.style.display = "block";
            var placar = document.getElementById('pontosJogo');
            placar.style.display = "contents";
            var ponto = document.getElementById('pontos');
            ponto.style.display = "block";
            var igual = document.getElementById('igualtecla');
            igual.addEventListener('click', function (){
                calculateM();
            });
        }
        //
        function calculateM(){
            var primeiro = numeroOperacao();
            var segundo = numeroOperacao();
            var operacaoNum = operacao();
            var igual = document.getElementById('igualtecla');
            if (operacaoNum == 1) {
                valor = primeiro + segundo;
                document.getElementById('comparador').value = valor;
                document.getElementById('operacaoJogo').value = primeiro + " + " + segundo;
                //
                igual.addEventListener('click', function () {
                    resultado = parseInt(document.getElementById('resultado').value);
                    if (valor == (resultado)) {
                        pontuacao();
                    }
                    else {
                        finalizacao(1);
                    }
                    document.getElementById('resultado').value = "";
                });
            } else if (operacaoNum == 2) {
                valor = primeiro - segundo;
                document.getElementById('comparador').value = valor;
                document.getElementById('operacaoJogo').value = primeiro + " - " + segundo;
                //
                igual.addEventListener('click', function () {
                    resultado = parseInt(document.getElementById('resultado').value);
                    if (valor == (resultado)) {
                        pontuacao();
                    }
                    else {
                        finalizacao(1);
                    }
                    document.getElementById('resultado').value = "";
                });
            } else if (operacaoNum == 3) {
                valor = primeiro * segundo;
                document.getElementById('comparador').value = valor;
                document.getElementById('operacaoJogo').value = primeiro + " * " + segundo;
                //
                igual.addEventListener('click', function () {
                    resultado = parseInt(document.getElementById('resultado').value);
                    if (valor == (resultado)) {
                        pontuacao();
                    }
                    else {
                        finalizacao(1);
                    }
                    document.getElementById('resultado').value = "";
                });
            } else {
                valor = primeiro / segundo;
                document.getElementById('comparador').value = valor;
                document.getElementById('operacaoJogo').value = primeiro + " / " + segundo;
                //
                igual.addEventListener('click', function () {
                    resultado = parseInt(document.getElementById('resultado').value);
                    if (valor == (resultado)) {
                        pontuacao();
                    }
                    else {
                        finalizacao(1);
                    }
                    document.getElementById('resultado').value = "";
                });
            }
        }
        //
        function voltar() {
            var volta = document.getElementById('voltar');
            volta.addEventListener('click', document.location.reload(true));
        }
        //
        function numeroOperacao() { // randoniza de 0 a 10
            return Math.floor(Math.random() * 10);
        }
        //
        function operacao() { // randoniza de 1 a 4
            return Math.floor(Math.random() * 4 + 1);
        }
        //
        function pontuacao() {
            var ponto = parseInt(document.getElementById('pontos').value);
            ponto++;
            document.getElementById('pontos').value = ponto;
            clearInterval(interval);
            configTimer();
        }
        //
        function finalizacao(tipo){
            var pontoFinal = document.getElementById('pontos').value;
            if(tipo == 0){
                alert('Seu tempo acabou, sua pontuação foi: ' + pontoFinal);
            }else{
                alert('Resposta errada, sua pontuação foi: ' + pontoFinal);
            }
        }
        //
        function startTimer(duration, display) {
            var timer = duration, minutes, seconds;
            interval = setInterval(function () {
                minutes = parseInt(timer / 60, 10);
                seconds = parseInt(timer % 60, 10);
                minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;
                display.textContent = minutes + ":" + seconds;
                if (--timer < 0) {
                    timer = duration;
                    display.style.display = 'none';
                    finalizacao(0);
                }
            }, 1000);
        }
        //
        function configTimer() {
            var duration = 60 * 3; // Converter para segundos
            display = document.querySelector('#timer'); // selecionando o timer
            startTimer(duration, display); // iniciando o timer
        };
        //
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
</body>

</html>